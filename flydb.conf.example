# FlyDB Configuration File
# Generated by FlyDB

# Server role: standalone or cluster
role = "standalone"

# Network ports
# Port is for client connections (binary protocol)
port = 8889
replication_port = 9999
cluster_port = 9998

# Replication mode: async, semi_sync, or sync
replication_mode = "async"
sync_timeout_ms = 5000
max_replication_lag_ms = 10000

# Raft Consensus Configuration (01.26.13+)
# Enable Raft consensus for leader election (replaces legacy Bully algorithm)
# Raft provides stronger consistency guarantees and pre-vote protocol
enable_raft = true
raft_election_timeout_ms = 1000
raft_heartbeat_interval_ms = 150

# Service Discovery Configuration
# Enable mDNS-based service discovery for automatic cluster formation
# When enabled, nodes advertise themselves and can discover peers automatically
discovery_enabled = false
# Cluster ID for discovery (nodes with same cluster_id will discover each other)
# Leave empty to use the default cluster ID
discovery_cluster_id = ""

# Compression Configuration (01.26.13+)
# Enable compression for WAL entries and replication traffic
# Reduces disk I/O and network bandwidth at the cost of CPU
enable_compression = false
# Compression algorithm: gzip, lz4, snappy, or zstd
compression_algorithm = "gzip"
# Minimum payload size in bytes to compress (smaller payloads skip compression)
compression_min_size = 256

# Performance Configuration (01.26.13+)
# Enable zero-copy buffer pooling for reduced memory allocations
enable_zero_copy = true
# Buffer pool size in bytes for zero-copy operations (0 = auto-size)
buffer_pool_size_bytes = 0

# Storage
data_dir = "/Users/ancongui/.local/share/flydb"
db_path = "flydb.fdb"

# Data-at-rest encryption (ENABLED BY DEFAULT for security)
# When enabled, you MUST set FLYDB_ENCRYPTION_PASSPHRASE environment variable
# To disable encryption, set encryption_enabled = false
# WARNING: Keep your passphrase safe - data cannot be recovered without it!
encryption_enabled = true

# TLS Configuration (ENABLED BY DEFAULT for security)
# TLS encrypts client-server connections using TLS 1.2+
tls_enabled = true
# tls_cert_file = "/etc/flydb/certs/server.crt"  # Auto-determined if not set
# tls_key_file = "/etc/flydb/certs/server.key"   # Auto-determined if not set
# Auto-generate self-signed certificates if not found (for development/testing)
tls_auto_gen = true

# Logging
log_level = "info"
log_json = false
